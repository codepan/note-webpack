1. expose-loader 暴露到全局对象window上
2. webpack.ProvidePlugin() 向每个模块注入
3. externals 引入但不打包

# expose-loader可以将某个模块暴露到全局，即挂载到window对象上面

使用方法有很多，例如我们要使用jquery类库
```
require('expose-loader?$!jquery')
console.log(window.$)
```

```
import $ from 'expose-loader?$!jquery'
console.log($)
console.log(window.$)
```

```js
module.exports = {
  module: {
    rules: [
      {
        test: require.resolve('jquery'), // require.resolve()是nodejs中require实例上面的resolve方法，这个方法是获取jquery类库的绝对路径
        use: {
          loader: 'expose-loader',
          options: 'jQuery'
        }
      }
    ]
  }
}

// 在xx.js文件中
import $ from 'jquery'
console.log($)
console.log(window.jQuery)
```

第三种方法是以上三种方法中最好的一个，但是这个使用也比较麻烦，我们期望的是：自动向window上挂载jquery实例，而不用手动import或者require，解决办法参见webpack.ProvidePlugin.md

# ProvidePlugin
自动加载模块，而不必到处 import 或 require
```
new webpack.ProvidePlugin({
  $: 'jquery',
  jQuery: 'jquery'
})
```
```
// in a module
// $ 自动被设置为 "jquery" 输出的内容
$('#item')
jQuery('#item')
```

每个模块中都会暴露一个$和jQuery实例


# externals

有时候我们会在html页面中使用script标签来引入jquery，
```
<script src="https://cdn.bootcss.com/jquery/3.4.0/jquery.min.js"></script>
```
这样引入之后，window上就会挂载$实例。我们希望的是jquery通过外部引入的方式来使用，并不是采用import或者require的形式引入

如果使用了import或者require的形式引入（其实没有必要，但是你非要这么干，那我也没办法），webpack就会将jquery的源码整个打包，导致输出的bundle会很大

# 作用
首先webpack提供这个`externals`选项作用是从打包的bundle文件中排除依赖。换句话说就是让在项目中通过import引入的依赖在打包的时候不会打包到bundle包中去，而是通过script的方式去访问这些依赖。
# 如何使用
以jquery为例子，目的是在runtime时通过cdn获取jquery依赖，在打包时忽略他的打包
## 第一步
```
// index.html
<script src="https://cdn.bootcss.com/jquery/3.4.0/jquery.min.js"></script>
```
## 第二步
```
// webpack.config.js
module.exports = {
  externals: {
    /* 将需要忽略打包的都写在这个里面，但前提是index.html文件里面必须script引入
     * 属性名jquery指的是`import $ from 'jquery'` 中的`jquery`，即属性名是jquery的npm包名
     * 属性值`jQuery`或者`$`指的是jquery插件暴露出来的全局对象名。即jquery会向window对象上面挂载两个实例：`window.$`和`window.jQuery`
     */
    jquery: '$',
    // jquery: 'jQuery'
  }
}
```
## 第三步
```
// 模块文件中
// 千万不能去掉import，很重要，好多人就是把它去掉了跑过来问我为啥我的还是报错 jquery is undefined。  
import $ from 'jquery'
console.log($)
```